set -g status on
set -g status-position top
set -g status-right ""
set -g status-right-length 40
set -g status-right-style default
set -g status-style fg=blue,bg=black
set -g status-interval 15
set -g status-justify left
set -g status-keys vi
set -g status-left "#h: #S "
set -g status-left-length 100
set -g status-left-style default

set -g default-terminal "${TERM}"
set -as terminal-features ",${TERM}:RGB"
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'
set -gq allow-passthrough on
set -g set-clipboard on
set -g mouse on
set -g detach-on-destroy off

unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

bind p run-shell 'toggle-tmux-popup'
bind r source-file ~/.tmux.conf

bind -T root F12  \
  set prefix None \;\
  set key-table off \;\
  set status-style "fg=$color_status_text,bg=$color_window_off_status_bg" \;\
  set window-status-current-format "#[fg=$color_window_off_status_bg,bg=$color_window_off_status_current_bg]$separator_powerline_right#[default] #I:#W# #[fg=$color_window_off_status_current_bg,bg=$color_window_off_status_bg]$separator_powerline_right#[default]" \;\
  set window-status-current-style "fg=$color_dark,bold,bg=$color_window_off_status_current_bg" \;\
  if -F '#{pane_in_mode}' 'send-keys -X cancel' \;\
  refresh-client -S \;\

bind -T off F12 \
  set -u prefix \;\
  set -u key-table \;\
  set -u status-style \;\
  set -u window-status-current-style \;\
  set -u window-status-current-format \;\
  refresh-client -S
  
wg_is_keys_off="#[fg=red,bg=black]#([ $(tmux show-option -qv key-table) = 'off' ] && echo 'ðŸ˜´')#[default]"

set -g status-left "$wg_is_keys_off #h: #S"
